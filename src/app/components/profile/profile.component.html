<div class="my-container" *ngIf="user !== null">
  <div class="wp-300">
    <div class="sidebar-header image-phone" (window:resize)="initResponsiveElements()">
      <div class="mobile-button">
        <button class="settings" [routerLink]="['/settings']"><i class="fa fa-cog"></i></button>
        <!-- <button class="" [routerLink]="['/settings']"><i class="fa fa-rss"></i></button> -->
      </div>
      <img src="{{user.otherInformation.publicMedia.profileImage}}" class="rounded-circle cursor-pointer" data-toggle="modal" data-target="#myModalImage" (click)="openImage(user.otherInformation.publicMedia.profileImage)" alt="" width="200px" height="200px" i18n="@@logoText">
      <button id="btn" data-toggle="modal" data-target="#myModal" *ngIf="!status">
        <i class="fa fa-camera-retro btn-hide" aria-hidden="true"></i>
        <span class="btn-hide">Azurirati sliku</span>
      </button>
      <button class="btn-mobile-image"  data-toggle="modal" data-target="#myModal">
        <i class="fa fa-camera"></i>
      </button>
      <div class="m-t-10" style="color: #fff; text-align: center;">
        <h4>{{user.firstName + ' ' + user.lastName}}</h4>
        <p style="color: #00c928; font-size: 12px">
            <i class="fa fa-map-signs" style="color: #ddd" aria-hidden="true"></i> {{user.otherInformation.adress.city}} - {{user.otherInformation.adress.region}} - {{user.otherInformation.adress.country}} <br>
            <i class="fa fa-shopping-bag" style="color: #ddd" aria-hidden="true"></i> {{user.otherInformation.jobs.name}} - {{user.otherInformation.jobs.nameCompany}} - {{user.otherInformation.jobs.places}}
        </p>
        
        <button class="btn btn-outline-success " (click)="addFriends(user)" *ngIf="!isFriends && status && !isRequester && !isResponder">Dodati prijatelja <span class="spinner-border smal" role="status" *ngIf="btnSave"></span></button>
        <button class="btn btn-outline-danger" (click)="removeRelationShip(user)" *ngIf="status && isRequester && !isResponder">Povuci zahtjev <span class="spinner-border smal" role="status" *ngIf="btnSave"></span></button>
        <button class="btn btn-outline-danger" (click)="removeRelationShip(user)" *ngIf="status && !isRequester && isResponder">Odbi zahtjev <span class="spinner-border smal" role="status" *ngIf="btnCancel"></span></button>

        <button class="btn btn-outline-success" (click)="acceptRelationship(user)" *ngIf="status && !isRequester && isResponder">Prihvati <span class="spinner-border smal" role="status" *ngIf="btnSave"></span></button>
        <button class="btn btn-outline-danger" (click)="removeFriends(user)" *ngIf="isFriends && status && !isRequester && !isResponder">Izbrisi prijatelja <span class="spinner-border smal" role="status" *ngIf="btnSave"></span></button>
        
        <button class="btn btn-outline-success btn-hide-mobile" *ngIf="!isFriends && !status && !isRequester && !isResponder" [routerLink]="['/settings']">Azurirati profil <span class="spinner-border smal" role="status" *ngIf="btnSave"></span></button>
        
        <hr>
        <!-- <span>O meni</span> -->
        <!-- <p style="margin: 0; padding: 0; font-size: 12px; color: #ddd">{{user.otherInformation.about}}</p> -->
        <div class="privat-information">
            <app-location [typeLocation]="typeLocation" [user]="user"></app-location>
        </div>
      </div>
    </div>
    <!-- <div class="locate-css">
      <img src="../../../assets/picture/maps.png" width="100%" height="100%" />
    </div> -->
  </div>
  <div class="locate-css"></div>
  <div class="wp-r-300 background">
    <div class="nav-bar">
      <div class="row" style="margin-right: 0;">
        <div [ngClass]="!status ? 'col-4' : 'col-6'">
          <p (click)="openTab('home')" i18n="@@proflieNavHome" [ngClass]="activeUser ? 'active' : ''">Pocetna</p>
        </div>
        <div class="col-4" *ngIf="!status">
          <p (click)="openTab('friend')" i18n="@@proflieNavFriend" [ngClass]="activePicture ? 'active' : ''">Prijatelji</p>
        </div>
        <div [ngClass]="!status ? 'col-4' : 'col-6'">
          <p (click)="openTab('picture')" i18n="@@proflieNavPicture" [ngClass]="activeFriend ? 'active' : ''">Slike</p>
        </div>
      </div>
    </div>

    <div class="user-tab" id="style-4" *ngIf="tab === 'home'">
      <div class="add-publication" *ngIf="!status">
        <div class="profile"><img src="{{user.otherInformation.publicMedia.profileImage}}" alt="" width="100%" height="100%"></div>
        <div class="location cursor-pointer" data-toggle="modal" data-target="#myModalLocation">
          <div class="left"><i class="fa fa-map-marker" aria-hidden="true"></i></div>
          <div class="right">Ostavite lokaciju</div>
        </div>
        <div class="picture cursor-pointer">
          <div class="left"><i class="fa fa-picture-o" aria-hidden="true"></i></div>
          <div class="right">Postavite sliku</div>
        </div>
      </div>
      <app-publication *ngFor="let item of publication" [item]="item" [user]="user" (imageEmiter)="onImageEmiter($event)"></app-publication>
    </div>

    <div class="user-tab" id="style-4" *ngIf="tab === 'friend'">
      <div class="spinner-border text-success friend-center" role="status" *ngIf="userList === null">
        <span class="sr-only">Loading...</span>
      </div>
      <app-friends *ngFor="let item of userList" [item]="item" [user]="user"></app-friends>
    </div>

    <div class="user-tab" id="style-4" *ngIf="tab === 'picture' && imagesList !== null">
      <app-images [imagesList]="imagesList"> </app-images>    
    </div>
  </div>
</div>

<div class="container" *ngIf="user === null" style="margin: 50vh 0 0 0; text-align: center;">
  <div class="spinner-border text-success" role="status">
    <span class="sr-only">Loading...</span>
  </div>
</div>

<div id="myModalImage" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
        <div class="modal-body" *ngIf="imageLink !== null">
            <img src="{{imageLink}}" class="img-responsive1">
        </div>
        <div class="container"  style="margin: 50vh 0 0 0; text-align: center;" *ngIf="imageLink === null">
          <div class="spinner-border text-success" role="status">
            <span class="sr-only">Loading...</span>
          </div>
        </div>
    </div>
  </div>
</div>

<!-- The Modal -->
<div class="modal" id="myModal">
  <div class="modal-dialog">
    <div class="modal-content">

      <!-- Modal Header -->
      <div class="modal-header">
        <h4 class="modal-title">Promenite profilnu sliku</h4>
        <button type="button" class="close" data-dismiss="modal">&times;</button>
      </div>

      <!-- Modal body -->
      <div class="modal-body">
        <div class="content-img" style="margin: 0; margin: 0 auto;" *ngIf="selectedFilesHeaderImage === null">
          <div class="box" style=" padding-left: 40%" *ngIf="load">
              <div class="loader"></div>
          </div>
          <div class="box" *ngIf="!load">
            <input type="file" name="filesp" id="filesp" (change)="onSelectImgForHeader($event)" class="inputfile inputfile-4" accept="image/*" data-multiple-caption="{count} filesp selected" multiple style="display: none" />
            <label for="filesp"><figure><svg xmlns="assets/img/outbox.png" width="20" height="17" viewBox="0 0 20 17"><path d="M10 0l-5.2 4.9h3.3v5.1h3.8v-5.1h3.3l-5.2-4.9zm9.3 11.5l-3.2-2.1h-2l3.4 2.6h-3.5c-.1 0-.2.1-.2.1l-.8 2.3h-6l-.8-2.2c-.1-.1-.1-.2-.2-.2h-3.6l3.4-2.6h-2l-3.2 2.1c-.4.3-.7 1-.6 1.5l.6 3.1c.1.5.7.9 1.2.9h16.3c.6 0 1.1-.4 1.3-.9l.6-3.1c.1-.5-.2-1.2-.7-1.5z"/></svg></figure> <span>Izaberite sliku&hellip;</span></label>
          </div>
        </div>
        <div class="" style="margin: 0; margin: 0 auto;" *ngIf="selectedFilesHeaderImage !== null">
          <div>
            <img [src]="urlsForHeaderImage" height="100%" width="100%">
          </div>
        </div>
      </div>

      <!-- Modal footer -->
      <div class="modal-footer">
        <button type="button" class="btn btn-outline-danger" style="float: left;" (click)="ngHeaderImage()">Odustanite</button>
        <button type="button" class="btn btn-outline-success" style="float: left;" (click)="ngSaveImageHeader()" data-dismiss="modal">AÅ¾urirajete sliku</button>
      </div>

    </div>
  </div>
</div>

<!-- The Modal -->
<div class="modal" id="myModalLocation">
  <div class="modal-dialog">
    <div class="modal-content">

      <!-- Modal Header -->
      <div class="modal-header">
        <h4 class="modal-title">Vasa lokacija</h4>
        <button type="button" class="close" data-dismiss="modal">&times;</button>
      </div>

      <!-- Modal body -->
      <div class="modal-body">
        <app-locat-me (voted)="onVoted($event)"></app-locat-me>

        <input type="text" class="form-control" name="message" [(ngModel)]="newLocationSave.message" placeholder="Kako se osecate">
      </div>

      <!-- Modal footer -->
      <div class="modal-footer">
        <button type="button" class="btn btn-outline-danger" data-dismiss="modal" style="float: left;" >Odustanite</button>
        <button type="button" class="btn btn-outline-success" style="float: left;" (click)="ngSaveLocation()" data-dismiss="modal">Podelite lokaciju</button>
      </div>

    </div>
  </div>
</div>


<!-- Pokisavamo da ovo izmjestimo na neku drugu lokaciju, da model bude na jednom mjesto -->

<div id="myModalImagePublication" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">

      <div class="modal-body"  *ngIf="imagePublication !== null">
        <img src="{{imagePublication.image}}" class="img-responsive1">
        <button type="button" (click)="likeDislike(imagePublication.isStatus)" [ngClass]="{'btn-success': !imagePublication.isStatus, 'btn-warning': imagePublication.isStatus }" class="btn modal-button-position left-20">
          <i class="fa fa-thumbs-o-up" *ngIf="!imagePublication.isStatus"></i>
          <i class="fa fa-thumbs-o-down" *ngIf="imagePublication.isStatus"></i>
        </button>

        <button *ngIf="!isFriends && !status && !isRequester && !isResponder" type="button" (click)="addToProfile(imagePublication)" class="btn modal-button-position left-60 btn-success">
          <span>Postavi kao profilnu</span>
        </button>

        <span class="number-of-likes">
          Lajkovi: {{imagePublication.likes.length}}
        </span>
      </div>
    </div>
  </div>
</div>